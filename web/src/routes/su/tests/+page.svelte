<script lang="ts">
  const vtree: CV.Cvtree = [
    'TOP',
    0,
    74,
    '',
    [
      [
        'IP',
        0,
        74,
        '',
        [
          [
            'IP',
            0,
            20,
            '',
            [
              [
                'NP',
                0,
                10,
                '',
                [
                  ['CLP', 1, 1, '', [['M', 1, 1, '', '块', 'khối', 23]]],
                  ['NP', 8, 2, '', [['NN', 8, 2, '', '石头', 'tảng đá', 25]]],
                  [
                    'CP',
                    2,
                    6,
                    '',
                    [
                      [
                        'CP',
                        2,
                        6,
                        '',
                        [
                          [
                            'IP',
                            2,
                            5,
                            '',
                            [
                              [
                                'NP',
                                2,
                                2,
                                '',
                                [['NN', 2, 2, '', '形状', 'hình dáng', 15]],
                              ],
                              [
                                'VP',
                                4,
                                3,
                                '',
                                [['VA', 4, 3, '', '不规则', 'bất quy tắc', 13]],
                              ],
                            ],
                          ],
                          ['DEC', 7, 1, 'Hide', '的', '', 23],
                        ],
                      ],
                    ],
                  ],
                  ['DT', 0, 1, '', '那', 'kia', 23],
                ],
              ],
              ['NP', 10, 2, '', [['NN', 10, 2, '', '表面', 'mặt ngoài', 15]]],
              [
                'VP',
                12,
                8,
                '',
                [
                  ['VV', 12, 2, '', '遍布', 'phân bố', 13],
                  [
                    'NP',
                    14,
                    6,
                    '',
                    [
                      ['NP', 19, 1, '', [['NN', 19, 1, '', '斑', 'đốm', 25]]],
                      ['ADJP', 18, 1, '', [['JJ', 18, 1, '', '银', 'bạc', 23]]],
                      [
                        'CP',
                        14,
                        4,
                        '',
                        [
                          [
                            'CP',
                            14,
                            4,
                            '',
                            [
                              [
                                'IP',
                                14,
                                3,
                                '',
                                [
                                  [
                                    'VP',
                                    14,
                                    3,
                                    '',
                                    [
                                      [
                                        'NP',
                                        14,
                                        2,
                                        '',
                                        [
                                          [
                                            'NN',
                                            14,
                                            2,
                                            '',
                                            '结晶',
                                            'kết tinh',
                                            15,
                                          ],
                                        ],
                                      ],
                                      [
                                        'VP',
                                        16,
                                        1,
                                        '',
                                        [['VV', 16, 1, '', '化', 'hoá', 13]],
                                      ],
                                    ],
                                  ],
                                ],
                              ],
                              ['DEC', 17, 1, 'Hide', '的', '', 23],
                            ],
                          ],
                        ],
                      ],
                    ],
                  ],
                ],
              ],
            ],
          ],
          ['PU', 20, 1, 'Capx Undb', '，', ',', 23],
          [
            'IP',
            21,
            18,
            '',
            [
              [
                'VP',
                21,
                18,
                '',
                [
                  [
                    'PP',
                    21,
                    8,
                    '',
                    [
                      ['P', 21, 1, '', '在', 'ở', 23],
                      [
                        'NP',
                        22,
                        7,
                        '',
                        [
                          [
                            'NP',
                            27,
                            2,
                            'Ndes Nloc',
                            [
                              [
                                'NN',
                                27,
                                2,
                                'Ndes Nloc',
                                '手中',
                                'trong tay',
                                25,
                              ],
                            ],
                          ],
                          [
                            'NP',
                            22,
                            5,
                            '',
                            [
                              [
                                'NN',
                                25,
                                2,
                                'Npos Nper',
                                '小姐',
                                'tiểu thư',
                                25,
                              ],
                              ['NN', 24, 1, '', '官', 'quan', 15],
                              ['NN', 22, 2, '', '舰务', 'hạm vụ', 6],
                            ],
                          ],
                        ],
                      ],
                    ],
                  ],
                  [
                    'VP',
                    29,
                    10,
                    '',
                    [
                      ['AS', 31, 1, 'Hide', '着', '', 23],
                      ['VV', 29, 2, '', '散发', 'phát ra', 13],
                      [
                        'NP',
                        32,
                        7,
                        '',
                        [
                          [
                            'NP',
                            35,
                            4,
                            '',
                            [
                              ['NN', 37, 2, '', '光泽', 'sáng bóng', 25],
                              ['NN', 35, 2, 'Ndes', '金属', 'kim loại', 25],
                            ],
                          ],
                          [
                            'CP',
                            32,
                            3,
                            '',
                            [
                              [
                                'CP',
                                32,
                                3,
                                '',
                                [
                                  [
                                    'IP',
                                    32,
                                    2,
                                    '',
                                    [
                                      [
                                        'VP',
                                        32,
                                        2,
                                        '',
                                        [
                                          [
                                            'VA',
                                            32,
                                            2,
                                            '',
                                            '绚丽',
                                            'huyễn lệ',
                                            13,
                                          ],
                                        ],
                                      ],
                                    ],
                                  ],
                                  ['DEC', 34, 1, 'Hide', '的', '', 23],
                                ],
                              ],
                            ],
                          ],
                        ],
                      ],
                    ],
                  ],
                ],
              ],
            ],
          ],
          ['PU', 39, 1, 'Capx Undb', '，', ',', 23],
          [
            'IP',
            40,
            33,
            '',
            [
              [
                'NP',
                40,
                4,
                '',
                [
                  ['PN', 42, 2, '', '自己', 'bản thân', 23],
                  [
                    'NP',
                    40,
                    2,
                    'Npos Nper',
                    [['NR', 40, 2, 'Npos Nper', '方鸻', 'Phương Hằng', 12]],
                  ],
                ],
              ],
              [
                'VP',
                44,
                29,
                '',
                [
                  [
                    'VP',
                    44,
                    12,
                    '',
                    [
                      [
                        'ADVP',
                        44,
                        1,
                        '',
                        [['AD', 44, 1, '', '就', 'liền', 23]],
                      ],
                      [
                        'VP',
                        45,
                        11,
                        '',
                        [
                          ['AS', 47, 1, '', '过', 'qua', 23],
                          ['VV', 45, 2, '', '进修', 'tiến tu', 13],
                          [
                            'NP',
                            48,
                            8,
                            '',
                            [
                              [
                                'NP',
                                53,
                                3,
                                '',
                                [
                                  ['NN', 55, 1, '', '学', 'học', 25],
                                  ['NN', 53, 2, '', '矿物', 'khoáng vật', 15],
                                ],
                              ],
                              [
                                'DNP',
                                48,
                                5,
                                '',
                                [
                                  ['DEG', 52, 1, '', '的', 'của', 31],
                                  [
                                    'NP',
                                    48,
                                    4,
                                    'Npos Nloc',
                                    [
                                      [
                                        'NR',
                                        48,
                                        4,
                                        'Npos Nloc',
                                        '艾塔黎亚',
                                        'Etariya',
                                        12,
                                      ],
                                    ],
                                  ],
                                ],
                              ],
                            ],
                          ],
                        ],
                      ],
                    ],
                  ],
                  ['PU', 56, 1, 'Capx Undb', '，', ',', 23],
                  [
                    'VP',
                    57,
                    16,
                    '',
                    [
                      [
                        'ADVP',
                        57,
                        2,
                        '',
                        [['AD', 57, 2, '', '自然', 'tự nhiên', 25]],
                      ],
                      [
                        'ADVP',
                        59,
                        2,
                        '',
                        [['AD', 59, 2, '', '一眼', 'một mắt', 23]],
                      ],
                      [
                        'VP',
                        61,
                        12,
                        '',
                        [
                          ['VV', 61, 2, '', '认出', 'nhận ra', 13],
                          [
                            'IP',
                            63,
                            10,
                            '',
                            [
                              [
                                'NP',
                                63,
                                1,
                                'Pn_d',
                                [['PN', 63, 1, 'Pn_d', '这', 'đây', 23]],
                              ],
                              [
                                'VP',
                                64,
                                9,
                                '',
                                [
                                  ['VC', 64, 1, '', '是', 'là', 23],
                                  [
                                    'NP',
                                    65,
                                    8,
                                    '',
                                    [
                                      [
                                        'NP',
                                        67,
                                        6,
                                        '',
                                        [
                                          [
                                            'NP',
                                            71,
                                            2,
                                            '',
                                            [
                                              [
                                                'NN',
                                                71,
                                                2,
                                                '',
                                                '矿物',
                                                'khoáng vật',
                                                15,
                                              ],
                                            ],
                                          ],
                                          [
                                            'NP',
                                            67,
                                            4,
                                            '',
                                            [
                                              [
                                                'NN',
                                                70,
                                                1,
                                                '',
                                                '银',
                                                'bạc',
                                                25,
                                              ],
                                              [
                                                'ADJP',
                                                69,
                                                1,
                                                '',
                                                [
                                                  [
                                                    'JJ',
                                                    69,
                                                    1,
                                                    '',
                                                    '秘',
                                                    'bí',
                                                    13,
                                                  ],
                                                ],
                                              ],
                                              [
                                                'NN',
                                                67,
                                                2,
                                                '',
                                                '硫化',
                                                'lưu hoá',
                                                15,
                                              ],
                                            ],
                                          ],
                                        ],
                                      ],
                                      [
                                        'DP',
                                        65,
                                        2,
                                        'Pn_d',
                                        [
                                          [
                                            'DT',
                                            65,
                                            2,
                                            'Pn_d',
                                            '某种',
                                            'nào đó',
                                            15,
                                          ],
                                        ],
                                      ],
                                    ],
                                  ],
                                ],
                              ],
                            ],
                          ],
                        ],
                      ],
                    ],
                  ],
                ],
              ],
            ],
          ],
          ['PU', 73, 1, 'Capn Undb', '。', '.', 23],
        ],
      ],
    ],
  ]

  const htree: CV.Cvtree = [
    'TOP',
    0,
    74,
    '',
    [
      ['_', 0, 1, '', '那', 'na', 2],
      ['_', 1, 1, '', '块', 'khối', 2],
      ['_', 2, 1, '', '形', 'hình', 2],
      ['_', 3, 1, '', '状', 'trạng', 2],
      ['_', 4, 1, '', '不', 'bất', 2],
      ['_', 5, 1, '', '规', 'quy', 2],
      ['_', 6, 1, '', '则', 'tắc', 2],
      ['_', 7, 1, '', '的', 'đích', 2],
      ['_', 8, 1, '', '石', 'thạch', 2],
      ['_', 9, 1, '', '头', 'đầu', 2],
      ['_', 10, 1, '', '表', 'biểu', 2],
      ['_', 11, 1, '', '面', 'diện', 2],
      ['_', 12, 1, '', '遍', 'biến', 2],
      ['_', 13, 1, '', '布', 'bố', 2],
      ['_', 14, 1, '', '结', 'kết', 2],
      ['_', 15, 1, '', '晶', 'tinh', 2],
      ['_', 16, 1, '', '化', 'hoá', 2],
      ['_', 17, 1, '', '的', 'đích', 2],
      ['_', 18, 1, '', '银', 'ngân', 2],
      ['_', 19, 1, '', '斑', 'ban', 2],
      ['_', 20, 1, 'Capx Undb', '，', ',', 4],
      ['_', 21, 1, '', '在', 'tại', 2],
      ['_', 22, 1, '', '舰', 'hạm', 2],
      ['_', 23, 1, '', '务', 'vụ', 2],
      ['_', 24, 1, '', '官', 'quan', 2],
      ['_', 25, 2, '', '小姐', 'tiểu thư', 2],
      ['_', 27, 1, '', '手', 'thủ', 2],
      ['_', 28, 1, '', '中', 'trung', 2],
      ['_', 29, 1, '', '散', 'tán', 2],
      ['_', 30, 1, '', '发', 'phát', 2],
      ['_', 31, 1, '', '着', 'trứ', 2],
      ['_', 32, 1, '', '绚', 'huyến', 2],
      ['_', 33, 1, '', '丽', 'lệ', 2],
      ['_', 34, 1, '', '的', 'đích', 2],
      ['_', 35, 1, '', '金', 'kim', 2],
      ['_', 36, 1, '', '属', 'thuộc', 2],
      ['_', 37, 1, '', '光', 'quang', 2],
      ['_', 38, 1, '', '泽', 'trạch', 2],
      ['_', 39, 1, 'Capx Undb', '，', ',', 4],
      ['_', 40, 1, '', '方', 'phương', 2],
      ['_', 41, 1, '', '鸻', 'hằng', 2],
      ['_', 42, 1, '', '自', 'tự', 2],
      ['_', 43, 1, '', '己', 'kỷ', 2],
      ['_', 44, 1, '', '就', 'tựu', 2],
      ['_', 45, 1, '', '进', 'tiến', 2],
      ['_', 46, 1, '', '修', 'tu', 2],
      ['_', 47, 1, '', '过', 'quá', 2],
      ['_', 48, 1, '', '艾', 'ngải', 2],
      ['_', 49, 1, '', '塔', 'tháp', 2],
      ['_', 50, 1, '', '黎', 'lê', 2],
      ['_', 51, 1, '', '亚', 'á', 2],
      ['_', 52, 1, '', '的', 'đích', 2],
      ['_', 53, 1, '', '矿', 'khoáng', 2],
      ['_', 54, 1, '', '物', 'vật', 2],
      ['_', 55, 1, '', '学', 'học', 2],
      ['_', 56, 1, 'Capx Undb', '，', ',', 4],
      ['_', 57, 1, '', '自', 'tự', 2],
      ['_', 58, 1, '', '然', 'nhiên', 2],
      ['_', 59, 1, '', '一', 'nhất', 2],
      ['_', 60, 1, '', '眼', 'nhãn', 2],
      ['_', 61, 1, '', '认', 'nhận', 2],
      ['_', 62, 1, '', '出', 'xuất', 2],
      ['_', 63, 1, '', '这', 'giá', 2],
      ['_', 64, 1, '', '是', 'thị', 2],
      ['_', 65, 1, '', '某', 'mỗ', 2],
      ['_', 66, 1, '', '种', 'chủng', 2],
      ['_', 67, 1, '', '硫', 'lưu', 2],
      ['_', 68, 1, '', '化', 'hoá', 2],
      ['_', 69, 1, '', '秘', 'bí', 2],
      ['_', 70, 1, '', '银', 'ngân', 2],
      ['_', 71, 1, '', '矿', 'khoáng', 2],
      ['_', 72, 1, '', '物', 'vật', 2],
      ['_', 73, 1, 'Capn Undb', '。', '.', 4],
    ],
  ]
  let zfrom = 48
  let zupto = 52
  let icpos = ''

  import { data } from '$lib/stores/vtform_stores'
  import { render_ctree, render_ztext, render_vdata } from '$lib/mt_data_2'

  $: data.put(htree, vtree, zfrom, zupto, icpos)
  $: term = data.get_term(zfrom, zupto, icpos)
</script>

<article class="article island">
  <h3 class="label">Tiếng Trung:</h3>
  <!-- svelte-ignore a11y-click-events-have-key-events -->
  <!-- svelte-ignore a11y-no-static-element-interactions -->
  <div class="cdata _zh" lang="zh">
    {@html render_ztext($data.htree, 2)}
  </div>

  <h3 class="label">Hán Việt:</h3>
  <!-- svelte-ignore a11y-click-events-have-key-events -->
  <!-- svelte-ignore a11y-no-static-element-interactions -->
  <div class="cdata debug _hv">
    {@html render_vdata($data.htree, 2)}
  </div>

  <h3 class="label">
    <span class="title">Cây ngữ pháp:</span>
  </h3>
  <div class="cdata debug _ct">
    {@html render_ctree($data.vtree, 2)}
  </div>

  <br />
  <div class="input">
    <label
      >Từ vị trí: <input
        class="m-input"
        type="number"
        bind:value={zfrom} /></label>
    <label
      >Tới vị trí: <input
        class="m-input"
        type="number"
        bind:value={zupto} /></label>
    <label
      >Từ loại: <input class="m-input" type="text" bind:value={icpos} /></label>
  </div>

  <h3 class="label">Kết quả</h3>
  <div class="output">
    {JSON.stringify(term, null, 2)}
  </div>
</article>

<style lang="scss">
  .label {
    display: flex;
    @include ftsize(md);
    // padding: 0 0.75rem;
    // font-weight: bold;
    line-height: 1rem;

    margin-top: 0.5rem;
    margin-bottom: 0.25rem;
  }

  .cdata {
    padding: 0.25rem 0.5rem;
    @include border($loc: top-bottom);
    @include bgcolor(tert);
    @include scroll;

    &._zh {
      $line: 1.5rem;
      line-height: $line;
      max-height: $line * 3 + 0.75rem;
      @include ftsize(lg);
    }

    &._hv {
      $line: 1.125rem;
      line-height: $line;
      max-height: $line * 4 + 0.75rem;
    }

    &._ct {
      $line: 1.25rem;
      line-height: $line;
      max-height: $line * 10 + 0.75rem;

      :global(x-z) {
        font-weight: 500;
      }
    }
  }

  .input {
    display: flex;
    gap: 0.75rem;

    > label {
      flex: 1;
    }

    input {
      width: 100%;
    }
  }
</style>
